# 논리 할당 연산자 (Logical Assignment Operators)

## 개요
일상적인 자바스크립트 프로그래밍에서 변수에 새로운 값을 할당하기 전에 해당 변수를 검사하는 코드를 자주 작성합니다.  
이러한 검사는 특히 **컴포넌트 props**, **전역 설정**, **상태 객체**를 다룰 때 반복적인 작업이 될 수 있습니다.  
**논리 할당 연산자**는 이러한 과정을 간소화하여 ES2021에서 추가된 간단하고 강력한 기능입니다.

<br/>
<br/>
<br/>


## 논리 할당 연산자란?
논리 할당 연산자는 **논리 연산자**(`||`, `&&`, `??`)와 **할당 연산자**(`=`)를 결합한 단축 표현입니다.  
이는 일반적인 논리 표현식처럼 **단락 평가(short-circuit evaluation)** 를 수행합니다.

- 왼쪽 피연산자가 조건에 따라 실패(falsy, truthy, nullish)할 경우에만 오른쪽 피연산자가 평가됩니다.

  > **참고**  
  > 옵셔널 체이닝(`?.`)은 논리 할당의 **왼쪽에 사용할 수 없습니다.**  
  > 그렇지 않으면 `SyntaxError`가 발생합니다.

    ```js
    // ❌ SyntaxError
    user?.settings ||= {};
    ````

<br/>
<br/>
<br/>

## 1. 논리 OR 할당 (`||=`)

왼쪽 피연산자가 **falsy**인 경우에만 값을 할당합니다.

```js
user.theme ||= 'light';
```

동등한 코드:

```js
if (!user.theme) {
  user.theme = 'light';
}
```

**활용 예시**

* 값이 초기화되지 않았을 때 기본값 설정에 유용함
* 단, `0`, `''`, `false` 등 **의도적으로 설정된 값**도 덮어쓰므로 주의 필요

<br/>
<br/>
<br/>

## 2. 논리 AND 할당 (`&&=`)

왼쪽 피연산자가 **truthy**인 경우에만 값을 할당합니다.

```js
user.isLoggedIn &&= checkPermissions(user);
```

동등한 코드:

```js
if (user.isLoggedIn) {
  user.isLoggedIn = checkPermissions(user);
}
```

> **주의사항**
>
> * 왼쪽 피연산자가 `truthy`일 때만 오른쪽 피연산자가 평가됩니다.
> * 오른쪽의 결과값은 `truthy`든 `falsy`든 그대로 할당됩니다.

```js
let isEnabled = true;
isEnabled &&= false;
console.log(isEnabled); // false
```

<br/>
<br/>
<br/>

## 3. Null 병합 할당 (`??=`)

왼쪽 피연산자가 **null 또는 undefined**인 경우에만 값을 할당합니다.

```js
settings.timeout ??= 3000;
```

동등한 코드:

```js
if (settings.timeout === null || settings.timeout === undefined) {
  settings.timeout = 3000;
}
```

**특징**

* `0`, `false`, `''`와 같은 유효한 **falsy 값**은 덮어쓰지 않음
* 값이 **실제로 누락된 경우**에만 기본값을 할당하고 싶을 때 적합

<br/>
<br/>
<br/>

## 주요 사용 사례

### 1. 컴포넌트 props 기본값 설정

```js
props.showHelpText ??= true;
```

### 2. 전역 상태/설정 덮어쓰기 방지

```js
config.apiBase ||= '/api/v1';
```

### 3. 폼 데이터 유효성 검사

```js
formData.username &&= formData.username.trim();
```

<br/>
<br/>
<br/>

## 주의할 점

### `||=` 연산자의 덮어쓰기 문제

왼쪽 값이 `falsy`이면 의도치 않게 덮어씌울 수 있습니다.

```js
let count = 0;
count ||= 10;
console.log(count); // 10
```

### `??=`로 안전하게 처리

`null` 또는 `undefined`만 방어하고 유효한 `falsy` 값은 유지할 수 있습니다.

<br/>
<br/>
<br/>

## 사이드 이펙트 주의

오른쪽 표현식은 **필요할 때만** 평가되므로 성능 최적화와 예기치 못한 동작을 방지합니다.

```js
let calls = 0;
let obj = { val: 0 };

obj.val ||= ++calls;
console.log(obj.val); // 1

obj.val ||= ++calls;
console.log(obj.val); // 여전히 1
```



<br/>
<br/>
<br/>

---

- 참고 링크 : https://velog.io/@superlipbalm/logical-assignment-operators-in-javascript-small-syntax-big-wins